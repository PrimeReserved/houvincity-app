import{r as o,q as v,s as c,j as p}from"./sanity-5de92cf7.js";function f(r){const{channel:t,draft:e,published:n,livePreviewEnabled:l}=r,[i,u]=o.useState(e),[s,a]=o.useState(n);return o.useEffect(()=>{(i==null?void 0:i._rev)!==(e==null?void 0:e._rev)&&(o.startTransition(()=>u(e)),e&&(t==null||t.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:l,document:d(e)}))),(s==null?void 0:s._rev)!==(n==null?void 0:n._rev)&&(o.startTransition(()=>a(n)),n&&(t==null||t.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:l,document:d(n)})))},[t,e,l,i==null?void 0:i._rev,s==null?void 0:s._rev,n]),null}function d(r){const{_id:t,_type:e,_rev:n,slug:l}=r;return{_id:t,_type:e,_rev:n,slug:l}}var m=o.memo(function(r){const{channel:t,type:e,previewKitConnection:n,loadersConnection:l}=r,i=o.useMemo(()=>v(r.id),[r.id]),{draft:u,published:s,ready:a}=c(i,e,"low");return a&&u||s?p.jsx(f,{channel:t,draft:u,livePreviewEnabled:n==="connected"||l==="connected",published:s},i):null});export{m as default};
